```mermaid
sequenceDiagram
  participant C as Client
  participant GW as Gateway
  participant HUB as StreamHub
  participant DB as Event Log
  C->>GW: POST /api/chat
  GW->>HUB: enqueue request
  HUB->>DB: persist event
  HUB-->>C: SSE message
  C->>GW: Last-Event-ID
  GW->>HUB: replay request
  HUB->>DB: load window
  DB-->>HUB: persisted events
  HUB-->>C: replay + live stream
```
